(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){e.exports=a.p+"static/media/profile_img.0cc8b8fb.jpg"},237:function(e,t,a){e.exports=a(469)},242:function(e,t,a){},245:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},253:function(e,t,a){},427:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n,r=a(1),i=a.n(r),c=a(20),l=a.n(c),u=(a(242),a(11)),o=a.n(u),s=a(18),m=(a(245),a(14)),d=a(84),p=a(25),f=(a(250),a(251),a(472)),v=a(478),E=a(480),y=a(194),g=a.n(y),b=a(195),h=a.n(b),w=Object(m.b)(function(e){return{user:e.user,activitiesCount:e.activities.activityList.length,latestActivity:(t=e.activities.activityList,t.sort(function(e,t){return new Date(t.start_date_local).getTime()-new Date(e.start_date_local).getTime()})[0])};var t})(function(e){return i.a.createElement("div",{className:"profile"},i.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement(f.a,{src:h.a,style:{marginBottom:"-2.5rem",zIndex:1e5,position:"relative",maxWidth:"80px",maxHeight:"80px"},roundedCircle:!0})),i.a.createElement(v.a,null,i.a.createElement(v.a.Header,null,i.a.createElement("div",{className:"profileBody text-center"},i.a.createElement("h3",null,e.user.username),i.a.createElement("p",null,"Activities - ",e.activitiesCount))),i.a.createElement(E.a,{variant:"flush"},i.a.createElement(E.a.Item,null,i.a.createElement(function(){return e.latestActivity?i.a.createElement("div",null,"Latest activity:",i.a.createElement("br",null),i.a.createElement("b",null,e.latestActivity.type),"\xa0- ",i.a.createElement(g.a,{format:"MMM DD, YYYY"},e.latestActivity.start_date_local)):i.a.createElement("div",null)},null)),i.a.createElement(E.a.Item,null,"Your Training Log"))))}),S=(a(253),a(60)),k=function(e,t){var a=new Date(e);a.setHours(0,0,0,0);var n=new Date(t);return n.setHours(0,0,0,0),a.getTime()-n.getTime()},O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x=new Date(Date.now()-5184e5),I=function(e){for(var t=new Date(x),a=[],n=0;n<7;n++){var r=e.filter(function(e){return 0===k(new Date(e.start_date_local),t)}).map(function(e){return e.distance}).reduce(function(e,t){return e+t},0);a[n]={day:O[t.getDay()],distance:r=Math.round(10*r/1e3)/10},t.setDate(t.getDate()+1)}return a},j=Object(m.b)(function(e){return{activities:(t=e.activities.activityList,a=e.activitiesSummary.selectedActivity,t.filter(function(e){return e.type===a&&k(new Date(e.start_date_local),x)>=0}))};var t,a})(function(e){return i.a.createElement("div",null,i.a.createElement(S.b,{width:500,height:150,data:I(e.activities),margin:{top:5,right:30,left:0,bottom:5}},i.a.createElement(S.d,{dataKey:"day"}),i.a.createElement(S.e,null),i.a.createElement(S.c,null),i.a.createElement(S.a,{dataKey:"distance",fill:"#8884d8"})),i.a.createElement("p",{className:"text-muted"},"Strava"))}),A=(a(427),a(473)),C=a(205),R=a(95),T=a.n(R),_=a(17);!function(e){e.AlpineSki="AlpineSki",e.BackcountrySki="BackcountrySki",e.Canoeing="Canoeing",e.Crossfit="Crossfit",e.EBikeRide="EBikeRide",e.Elliptical="Elliptical",e.Golf="Golf",e.Handcycle="Handcycle",e.Hike="Hike",e.IceSkate="IceSkate",e.InlineSkate="InlineSkate",e.Kayaking="Kayaking",e.Kitesurf="Kitesurf",e.NordicSki="NordicSki",e.Ride="Ride",e.RockClimbing="RockClimbing",e.RollerSki="RollerSki",e.Rowing="Rowing",e.Run="Run",e.Sail="Sail",e.Skateboard="Skateboard",e.Snowboard="Snowboard",e.Snowshoe="Snowshoe",e.Soccer="Soccer",e.StairStepper="StairStepper",e.StandUpPaddling="StandUpPaddling",e.Surfing="Surfing",e.Swim="Swim",e.Velomobile="Velomobile",e.VirtualRide="VirtualRide",e.VirtualRun="VirtualRun",e.Walk="Walk",e.WeightTraining="WeightTraining",e.Wheelchair="Wheelchair",e.Windsurf="Windsurf",e.Workout="Workout",e.Yoga="Yoga"}(n||(n={}));var U=_.a(function(){for(var e={},t=0;t<37;t++)e.Ride=14;return e}()),L=a(93),N={selectedActivity:n.Ride},D={setActivity:function(e){return function(t){t({type:"SET_ACTIVITY",data:e})}}},B=Object(m.b)(function(e){return{selectedActivity:e.activitiesSummary.selectedActivity}},D)(function(e){var t={color:"white",textShadow:"0 1px 0 rgba(0, 0, 0, 0.1)"},a=function(t){return function(){e.setActivity(t)}};return i.a.createElement("div",null,i.a.createElement(A.a,null,i.a.createElement(C.a,{variant:"secondary",onClick:a(n.Ride),active:e.selectedActivity===n.Ride},i.a.createElement(T.a,{className:"activityIcon",name:"bicycle",size:"2x",style:t})),i.a.createElement(C.a,{variant:"secondary",onClick:a(n.Run),active:e.selectedActivity===n.Run},i.a.createElement(T.a,{name:"running",size:"2x",style:t})),i.a.createElement(C.a,{variant:"secondary",onClick:a(n.Swim),active:e.selectedActivity===n.Swim},i.a.createElement(T.a,{name:"swimmer",size:"2x",style:t}))))}),W=Object(m.b)(function(e){return{activities:e.activities}})(function(e){return i.a.createElement("div",null,i.a.createElement(v.a,null,i.a.createElement(v.a.Header,null,"Activities Summary"),i.a.createElement(E.a,{variant:"flush"},i.a.createElement(E.a.Item,null,i.a.createElement(B,null)),i.a.createElement(E.a.Item,null,i.a.createElement(j,null)),i.a.createElement(E.a.Item,null,"Month summary"))))}),F=function(){return i.a.createElement("div",null,i.a.createElement(w,null),i.a.createElement(W,null))},H=a(55),V=a.n(H),z=_.d({id:_.b,name:_.c,distance:_.b,moving_time:_.b,elapsed_time:_.b,type:U,start_date_local:_.c,workout_type:_.b,average_speed:_.b,max_speed:_.b,kilojoules:_.b,description:_.c,calories:_.b}),Y=function(){var e=Object(s.a)(o.a.mark(function e(t){var a,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(t)}},e.next=3,V.a.get("https://www.strava.com/api/v3/athlete/activities",a);case 3:return n=e.sent,console.log("Activities response",n.data),r=n.data,K(r),e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(e){e.forEach(function(e){return z.decode(e)})},M={getAll:Y},J={initialized:!1,activityList:[]},G={post:function(){var e=Object(s.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},P={post:function(){var e=Object(s.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.a.post("".concat("/api/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Z=a(476),q=a(474),Q=a(477),X=a(131),$={logout:function(){return function(e){window.localStorage.removeItem("FitnessAppUser"),e({type:"LOGOUT_USER"})}}},ee=Object(m.b)(null,$)(function(e){return i.a.createElement("div",null,i.a.createElement(Z.a,{bg:"light",expand:"lg"},i.a.createElement(X.LinkContainer,{exact:!0,to:"/"},i.a.createElement(Z.a.Brand,null,"Fitness App")),i.a.createElement(Z.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Z.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(q.a,{className:"mr-auto"},i.a.createElement(X.LinkContainer,{exact:!0,to:"/"},i.a.createElement(q.a.Link,{eventKey:"/"},"Home")),i.a.createElement(q.a.Link,{onClick:function(){return e.logout()}},"Logout"),i.a.createElement(Q.a,{title:"Dropdown",id:"basic-nav-dropdown"},i.a.createElement(Q.a.Item,{href:"#action/3.1"},"Action"),i.a.createElement(Q.a.Item,{href:"#action/3.2"},"Another action"),i.a.createElement(Q.a.Item,{href:"#action/3.3"},"Something"),i.a.createElement(Q.a.Divider,null),i.a.createElement(Q.a.Item,{href:"#action/3.4"},"Separated link"))))))}),te=a(42),ae=a(475),ne=a(479),re=a(481),ie={login:function(e){return function(){var t=Object(s.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.post(e);case 2:n=t.sent,window.localStorage.setItem("FitnessAppUser",JSON.stringify(n)),a({type:"SET_USER",data:n});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},ce=Object(p.k)(Object(m.b)(null,ie)(function(e){var t=Object(r.useState)(""),a=Object(te.a)(t,2),n=a[0],c=a[1],l=Object(r.useState)(""),u=Object(te.a)(l,2),o=u[0],s=u[1];return i.a.createElement("div",null,i.a.createElement("h4",null,"Login"),i.a.createElement("form",{id:"loginForm"},i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,"Username"),i.a.createElement(re.a,{id:"username",onChange:function(e){c(e.target.value)},type:"text",name:"username",placeholder:"Enter username"}),i.a.createElement(ne.a,null,"Password"),i.a.createElement(re.a,{onChange:function(e){s(e.target.value)},type:"password",id:"password",name:"password",placeholder:"Enter password"}),i.a.createElement(C.a,{onClick:function(){var t={username:n,password:o};document.getElementById("loginForm").reset(),e.login(t),e.history.push("/")}},"Login"))))})),le={addUser:function(e){return function(){var t=Object(s.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.post(e);case 2:n=t.sent,window.localStorage.setItem("FitnessAppUser",JSON.stringify(n)),a({type:"SET_USER",data:e});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},ue=Object(p.k)(Object(m.b)(null,le)(function(e){var t=Object(r.useState)(""),a=Object(te.a)(t,2),n=a[0],c=a[1],l=Object(r.useState)(""),u=Object(te.a)(l,2),o=u[0],s=u[1],m=Object(r.useState)(""),d=Object(te.a)(m,2),p=d[0],f=d[1],v=Object(r.useState)(""),E=Object(te.a)(v,2),y=E[0],g=E[1];return i.a.createElement("div",null,i.a.createElement("form",{id:"addUserForm"},i.a.createElement(ae.a,null,i.a.createElement(ne.a,null,"First name"),i.a.createElement(re.a,{onChange:function(e){c(e.target.value)},type:"text",name:"firstName",placeholder:"Enter first name"}),i.a.createElement(ne.a,null,"Last name"),i.a.createElement(re.a,{onChange:function(e){s(e.target.value)},type:"text",name:"lastName",placeholder:"Enter last name"}),i.a.createElement(ne.a,null,"Username"),i.a.createElement(re.a,{onChange:function(e){f(e.target.value)},type:"text",name:"username",placeholder:"Enter username"}),i.a.createElement(ne.a,null,"Password"),i.a.createElement(re.a,{onChange:function(e){g(e.target.value)},type:"password",name:"password",placeholder:"Enter password"}),i.a.createElement(C.a,{onClick:function(){var t={firstName:n,lastName:o,username:p,password:y};document.getElementById("addUserForm").reset(),e.addUser(t),e.history.push("/")}},"Submit"))))})),oe=function(){var e=Object(s.a)(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=window.localStorage.getItem("FitnessAppUser"))){e.next=4;break}return e.next=4,t.setUser(JSON.parse(a));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(s.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.user.username||oe(t),!t.activities.initialized&&t.user.username&&t.initializeActivities(t.user.stravaAccessToken);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me={initializeActivities:function(e){return function(){var t=Object(s.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.getAll(e);case 2:n=t.sent,a({type:"INITIALIZE_ACTIVITIES",data:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setUser:function(e){return function(){var t=Object(s.a)(o.a.mark(function t(a){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_USER",data:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},de=Object(m.b)(function(e){return{user:e.user,activities:e.activities}},me)(function(e){Object(r.useEffect)(function(){se(e)},[e]);var t=!!e.user&&!!e.user.username,a={display:t?"":"none"},n={display:t?"none":""};return i.a.createElement("div",{className:"container"},i.a.createElement(d.BrowserRouter,null,i.a.createElement("div",null,i.a.createElement("div",{style:n},i.a.createElement(ce,null)),i.a.createElement("div",{style:a},i.a.createElement(ee,null),i.a.createElement(p.d,{exact:!0,path:"/",render:function(){return i.a.createElement(F,null)}}),i.a.createElement(p.d,{path:"/login",render:function(){return i.a.createElement(ce,null)}}),i.a.createElement(p.d,{path:"/signup",render:function(){return i.a.createElement(ue,null)}})))))}),pe=a(57),fe=a(210),ve=Object(pe.c)({activities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return"INITIALIZE_ACTIVITIES"===t.type?Object(L.a)({},e,{activityList:t.data}):e},activitiesSummary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;return"SET_ACTIVITY"===t.type?Object(L.a)({},e,{selectedActivity:t.data}):e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?t.data:"LOGOUT_USER"===t.type?{}:e}}),Ee=Object(pe.d)(ve,Object(pe.a)(fe.a));l.a.render(i.a.createElement(m.a,{store:Ee},i.a.createElement(de,null)),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.e384d851.chunk.js.map